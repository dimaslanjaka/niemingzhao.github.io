<%
var gtagids = [];
if (Array.isArray(theme.analytics.google_site_id)) {
  gtagids = theme.analytics.google_site_id;
} else if (typeof theme.analytics.google_site_id == 'string') {
  gtagids.push(theme.analytics.google_site_id);
}
if (gtagids.length > 0) {
%>
<script async src="https://www.googletagmanager.com/gtag/js?id=<%= gtagids[0] %>"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag() { dataLayer.push(arguments); }
  gtag('js', new Date());
  gtag('send', 'pageview');
</script>
<%
for (let index = 0; index < gtagids.length; index++) {
  const gtagid = gtagids[index];
%>
<script>gtag('config', '<%= gtagid %>', {
    'page_title': document.title,
    'page_path': location.pathname,
    'page_location': location.href
  });
</script>
<%
}
}
%>